# Claude Commentary Bridge Configuration

enabled: true

# Channel mapping
channels:
  default: "claude-meta"
  assistants: "claude-assistants"
  workstation: "claude-workstation" 
  ops: "claude-ops"

# Event filtering
filters:
  # Types of events to include (base types)
  include_types:
    - "assistant"          # AI responses
    - "tool_call"         # Tool executions
    - "git_action"        # Git operations
    - "file_operation"    # File create/edit/delete
    - "session_start"     # New chat sessions
    - "session_end"       # Chat sessions ending
    - "command"           # Shell commands
    - "error"             # Errors and warnings
    - "user"              # User messages
  
  # Subtypes to include (optional - if not specified, all subtypes of included types are shown)
  # include_subtypes:  # Commented out - show ALL subtypes
  #   - "assistant_text"     # Claude's text responses
  #   - "assistant_tool_use" # Claude's tool usage
  #   - "user_text"          # User's text messages
  #   - "session_start"      # Session starts
  #   - "session_end"        # Session ends
  #   - "user_tool_result"   # Tool results
  #   - "user_interrupt"     # Interruptions
  
  # Subtypes to explicitly exclude (takes precedence over include_subtypes)
  exclude_subtypes: []  # Empty - exclude nothing
  
  # Regex patterns to exclude (case insensitive)
  exclude_patterns: []  # Empty - no pattern exclusions

  # Minimum message length to send
  min_message_length: 0  # No minimum - show everything

# Rate limiting (per channel)
rate_limit:
  messages_per_minute: 10
  burst_limit: 20

# --- NEW: Truncation policy (server-side hard cap) ---
truncation:
  enabled: false            # keep false so extension controls UX
  indicator: "â€¦"            # appended when hard-capped
  # Per-subtype byte/char caps (only used if enabled=true)
  limits:
    assistant_text: 0       # 0 = unlimited
    assistant_tool_use: 0
    user_text: 0
    user_tool_result: 0
    error: 0
  max_payload: 0            # 0 = unlimited, else final safety cap applied to payload.text

# Working directory to channel mapping
directory_patterns:
  "/var/workstation/assistants/": "claude-assistants"
  "/var/workstation/": "claude-workstation"
  "/opt/": "claude-ops"
  "/srv/": "claude-ops"
  "/home/johnb/sd/": "claude-ai-art"